<!-- MHonArc v2.6.24 -->
<!--X-Subject: [Omaha.pm] another quickie report -->
<!--X-From-R13: "Xnl Vnaanu" &#60;wunaanuNbzavubgryf.pbz> -->
<!--X-Date: 20 Oct 2006 18:44:41 &#45;0000 -->
<!--X-Message-Id: 29AB736ABCE5C745ABF9C93B02F2C27B05A37EAB@exchange2k3.omnihotels.net -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[Omaha.pm] another quickie report</title>
<link rev="made" href="mailto:jhannah@omnihotels.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg01180.html">Date Prev</a>][<a href="msg01182.html">Date Next</a>][<a href="msg01180.html">Thread Prev</a>][<a href="msg01183.html">Thread Next</a>][<a href="maillist.html#01181">Date Index</a>][<a href="threads.html#01181">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[Omaha.pm] another quickie report</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;<a href="mailto:omaha-pm%40pm.org">omaha-pm@pm.org</a>&gt;</li>
<li><em>Subject</em>: [Omaha.pm] another quickie report</li>
<li><em>From</em>: &quot;Jay Hannah&quot; &lt;<a href="mailto:jhannah%40omnihotels.com">jhannah@omnihotels.com</a>&gt;</li>
<li><em>Date</em>: Fri, 20 Oct 2006 13:44:01 -0500</li>
<li><em>Delivered-to</em>: <a href="mailto:mailman-omaha-pm%40mailman.pm.dev">mailman-omaha-pm@mailman.pm.dev</a></li>
<li><em>Delivered-to</em>: <a href="mailto:omaha-pm%40pm.org">omaha-pm@pm.org</a></li>
<li><em>List-archive</em>: &lt;<a href="http://mail.pm.org/pipermail/omaha-pm">http://mail.pm.org/pipermail/omaha-pm</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:omaha-pm-request@pm.org?subject=help">mailto:omaha-pm-request@pm.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;omaha-pm.pm.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:omaha-pm@pm.org">mailto:omaha-pm@pm.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://mail.pm.org/mailman/listinfo/omaha-pm">http://mail.pm.org/mailman/listinfo/omaha-pm</a>&gt;,	&lt;<a href="mailto:omaha-pm-request@pm.org?subject=subscribe">mailto:omaha-pm-request@pm.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://mail.pm.org/mailman/listinfo/omaha-pm">http://mail.pm.org/mailman/listinfo/omaha-pm</a>&gt;,	&lt;<a href="mailto:omaha-pm-request@pm.org?subject=unsubscribe">mailto:omaha-pm-request@pm.org?subject=unsubscribe</a>&gt;</li>
<li><em>Reply-to</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;<a href="mailto:omaha-pm%40pm.org">omaha-pm@pm.org</a>&gt;</li>
<li><em>Thread-index</em>: Acb0d7XaOgh4EMMBREmXCiSq0DbiIg==</li>
<li><em>Thread-topic</em>: another quickie report</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Given data like this:

2006-10-16 00:00:00,298 (Pairs.pm:231)&gt; HD 00 180353311CF983
[AUSSTH|18OCT06|22OCT06|4] [PALSRQ|ERRRP-DEEIND-ERC10|Omni Farm]
0.350898
2006-10-16 00:00:04,515 (Pairs.pm:231)&gt; 1P 1P 0A1953311D3112
[CANCUN|02NOV06|05NOV06|3] [PALSRQ|PALSRP|Omni Farm] 1.202273


Create a report like this:

BOOKRQ BOOKRP 5547 messages averaging 1.57 seconds each
AALSRQ AALSRP 8946 messages averaging 0.73 seconds each
PALSRQ ERRRP 64200 messages averaging 0.69 seconds each
PALSRQ PALSRP 99857 messages averaging 1.20 seconds each
RPINRQ RPINRP 12294 messages averaging 0.59 seconds each


Solution:

while (&lt;&gt;) {
   my ($in, $out, $time) = /\[.*\] \[(\w+)\|(\w+).*(\d+\.\d+)/;
   next unless $in;
   $stats{$in}{$out}{total} += $time;
   $stats{$in}{$out}{cnt}++;
}
my ($in, $out);
foreach $in (keys %stats) {
   foreach $out (keys %{$stats{$in}}) {
      $cnt =   $stats{$in}{$out}{cnt};
      $total = $stats{$in}{$out}{total};
      printf(&quot;%s %s %d messages averaging %0.2f seconds each\n&quot;,
         $in, $out, $cnt, $total / $cnt);
   }
}


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01180.html">Re: [Omaha.pm] Burned by a one-liner</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01182.html">Re: [Omaha.pm] [Bioperl-l] Documentation	typo:	Bio::Search::Result::GenericResult</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01180.html">Re: [Omaha.pm] Burned by a one-liner</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01183.html">[Omaha.pm] Pick a random array element ... beware the web experts :)</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01181"><strong>Date</strong></a></li>
<li><a href="threads.html#01181"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
