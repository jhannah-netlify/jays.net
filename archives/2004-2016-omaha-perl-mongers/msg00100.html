<!-- MHonArc v2.6.24 -->
<!--X-Subject: [Omaha.pm] Re: [olug] Expect script help... -->
<!--X-From-R13: Xnl Vnaanu &#60;wnlNwnlf.arg> -->
<!--X-Date: Sun, 29 Aug 2004 00:24:56 &#45;0500 -->
<!--X-Message-Id: D442392E&#45;F97B&#45;11D8&#45;98A7&#45;000A95E317B8@jays.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 24541.12.160.138.70.1093539223.squirrel@12.160.138.70 -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[Omaha.pm] Re: [olug] Expect script help...</title>
<link rev="made" href="mailto:jay@jays.net">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00099.html">Date Prev</a>][<a href="msg00101.html">Date Next</a>][<a href="msg00098.html">Thread Prev</a>][<a href="msg00101.html">Thread Next</a>][<a href="maillist.html#00100">Date Index</a>][<a href="threads.html#00100">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[Omaha.pm] Re: [olug] Expect script help...</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Omaha Linux User Group &lt;<a href="mailto:olug%40olug.org">olug@olug.org</a>&gt;</li>
<li><em>Subject</em>: [Omaha.pm] Re: [olug] Expect script help...</li>
<li><em>From</em>: Jay Hannah &lt;<a href="mailto:jay%40jays.net">jay@jays.net</a>&gt;</li>
<li><em>Date</em>: Sun, 29 Aug 2004 00:25:24 -0500</li>
<li><em>Cc</em>: Nebraska USA Perl Mongers of Omaha &lt;<a href="mailto:omaha-pm%40mail.pm.org">omaha-pm@mail.pm.org</a>&gt;</li>
<li><em>In-reply-to</em>: &lt;24541.12.160.138.70.1093539223.squirrel@12.160.138.70&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://mail.pm.org/pipermail/omaha-pm">http://mail.pm.org/pipermail/omaha-pm</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:omaha-pm-request@mail.pm.org?subject=help">mailto:omaha-pm-request@mail.pm.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;omaha-pm.mail.pm.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:omaha-pm@mail.pm.org">mailto:omaha-pm@mail.pm.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://www.pm.org/mailman/listinfo/omaha-pm">http://www.pm.org/mailman/listinfo/omaha-pm</a>&gt;,	&lt;<a href="mailto:omaha-pm-request@mail.pm.org?subject=subscribe">mailto:omaha-pm-request@mail.pm.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://www.pm.org/mailman/listinfo/omaha-pm">http://www.pm.org/mailman/listinfo/omaha-pm</a>&gt;,	&lt;<a href="mailto:omaha-pm-request@mail.pm.org?subject=unsubscribe">mailto:omaha-pm-request@mail.pm.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;24541.12.160.138.70.1093539223.squirrel@12.160.138.70&gt;</li>
<li><em>Reply-to</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;<a href="mailto:omaha-pm%40mail.pm.org">omaha-pm@mail.pm.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">

</pre><tt>Can you show us what success looks like when you run through the entire 
</tt><tt>process manually?
</tt><pre style="margin: 0em;">

j


On Aug 26, 2004, at 11:53 AM, Daniel Linder wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Guy,

  Slightly off-topic but I figgured what the heck. :)

I am trying to automate login to a remote Unix system.  I have this
working when my laptop telnets directly to the remote system and the
</pre><tt>expect script then ran a script on the remote server to set the 
</tt><tt>$DISPLAY
</tt><pre style="margin: 0em;">
variable.

The situation has changed and I now have to shell into an intermediate
</pre><tt>unix system, then run &quot;PowerBroker&quot; to connect in to the final 
</tt><tt>location.
</tt><pre style="margin: 0em;">
When my script runs on the remote system now, it can only get the IP
address of the intermediate &quot;PowerBroker&quot; system but not my true
workstation.

Can some expect or Tcl guru give me some quick pointers to parse the
command output in the expect script to parse out my workstations IP
address so I can send it to a remote system?

Here is a snippet of my expect code:

  #!/usr/bin/expect
  #
  # Code to login to the first machine would be here...
  #
  send &quot;who am i\n&quot;;
  # This returns:
  # linderd     pts/2     Aug 26 10:32   (10.120.15.88)
  set MYDISPLAY &lt;what goes here?&gt;
  #
  # Code to login to the second machine would be here...
  #
  # Now set my workstation DISPLAY variable...
  send &quot;DISPLAY=[ $DISPLAY ]:0.0\n&quot;;

Thanks!

Dan
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00101" href="msg00101.html">[Omaha.pm] Re: [olug] Expect script help...</a></strong>
<ul><li><em>From:</em> &quot;Daniel Linder&quot; &lt;dan@linder.org&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00099.html">RE: [Omaha.pm] bad perl - need help - dispatch table</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00101.html">[Omaha.pm] Re: [olug] Expect script help...</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00098.html">Re: [Omaha.pm] RE: wrong</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00101.html">[Omaha.pm] Re: [olug] Expect script help...</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00100"><strong>Date</strong></a></li>
<li><a href="threads.html#00100"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
