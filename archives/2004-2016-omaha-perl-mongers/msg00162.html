<!-- MHonArc v2.6.24 -->
<!--X-Subject: Re: [Omaha.pm] Debugging running Perl code on Windows. -->
<!--X-From-R13: "Rnavry Zvaqre" &#60;qnaNyvaqre.bet> -->
<!--X-Date: Tue, 21 Sep 2004 13:10:14 &#45;0500 -->
<!--X-Message-Id: 38583.12.160.138.51.1095790470.squirrel@12.160.138.51 -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 18205.68.227.169.15.1095739495.squirrel@68.227.169.15 -->
<!--X-Reference: 79064A2C&#45;0BD0&#45;11D9&#45;ADAC&#45;000A95E317B8@jays.net -->
<!--X-Reference: 23373.12.160.138.51.1095776544.squirrel@12.160.138.51 -->
<!--X-Reference: 05D05842&#45;0BE8&#45;11D9&#45;AE16&#45;000A95E317B8@jays.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [Omaha.pm] Debugging running Perl code on Windows.</title>
<link rev="made" href="mailto:dan@linder.org">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00161.html">Date Prev</a>][<a href="msg00163.html">Date Next</a>][<a href="msg00160.html">Thread Prev</a>][<a href="msg00163.html">Thread Next</a>][<a href="maillist.html#00162">Date Index</a>][<a href="threads.html#00162">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [Omaha.pm] Debugging running Perl code on Windows.</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;<a href="mailto:omaha-pm%40mail.pm.org">omaha-pm@mail.pm.org</a>&gt;</li>
<li><em>Subject</em>: Re: [Omaha.pm] Debugging running Perl code on Windows.</li>
<li><em>From</em>: &quot;Daniel Linder&quot; &lt;<a href="mailto:dan%40linder.org">dan@linder.org</a>&gt;</li>
<li><em>Date</em>: Tue, 21 Sep 2004 13:14:30 -0500 (CDT)</li>
<li><em>Cc</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;<a href="mailto:omaha-pm%40mail.pm.org">omaha-pm@mail.pm.org</a>&gt;</li>
<li><em>Importance</em>: Normal</li>
<li><em>In-reply-to</em>: &lt;<a href="msg00160.html">05D05842-0BE8-11D9-AE16-000A95E317B8@jays.net</a>&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://mail.pm.org/pipermail/omaha-pm">http://mail.pm.org/pipermail/omaha-pm</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:omaha-pm-request@mail.pm.org?subject=help">mailto:omaha-pm-request@mail.pm.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;omaha-pm.mail.pm.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:omaha-pm@mail.pm.org">mailto:omaha-pm@mail.pm.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://www.pm.org/mailman/listinfo/omaha-pm">http://www.pm.org/mailman/listinfo/omaha-pm</a>&gt;,	&lt;<a href="mailto:omaha-pm-request@mail.pm.org?subject=subscribe">mailto:omaha-pm-request@mail.pm.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://www.pm.org/mailman/listinfo/omaha-pm">http://www.pm.org/mailman/listinfo/omaha-pm</a>&gt;,	&lt;<a href="mailto:omaha-pm-request@mail.pm.org?subject=unsubscribe">mailto:omaha-pm-request@mail.pm.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;18205.68.227.169.15.1095739495.squirrel@68.227.169.15&gt;	&lt;<a href="msg00158.html">79064A2C-0BD0-11D9-ADAC-000A95E317B8@jays.net</a>&gt;	&lt;23373.12.160.138.51.1095776544.squirrel@12.160.138.51&gt;	&lt;<a href="msg00160.html">05D05842-0BE8-11D9-AE16-000A95E317B8@jays.net</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:dan%40linder.org">dan@linder.org</a>, &quot;Perl Mongers of Omaha,	Nebraska USA&quot; &lt;<a href="mailto:omaha-pm%40mail.pm.org">omaha-pm@mail.pm.org</a>&gt;</li>
<li><em>User-agent</em>: SquirrelMail/1.5.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


On Sep 21, 2004, at 9:22 AM, Daniel Linder wrote:
&gt; ObPerlNote: The &quot;END&quot; directive is great for this -- I just found this
&gt; about two months ago and really like this &quot;catch all&quot; for the
&gt; termination of my scripts.

&lt;quote who=&quot;Jay Hannah&quot;&gt;
&gt; How does that work?

Glad you asked... ;)

If you've ever written a perl script with multiple possible exit locations
you've probably written some sort of cleanup-code and tried to call it
right before the actual &quot;exit&quot; or &quot;die&quot; command.  But what happens if your
script dies unexpectedly at someother point in the code?

This is where the END &quot;package destructor&quot; comes into play.  Just add code
like the following to your program and it will execute the code as the
last steps when exiting.

Say you had a logfile you wanted to cleanup after each successfull run,
but your code has many exit points.  Rather than trying to find all the
exit points and put in your cleanup subroutines -- say
&quot;WriteFinalInfoToLogFile()&quot; -- then call &quot;close(LOGFILE)&quot;, then finally
&quot;exit&quot; (with the apropriate exit code for that section).

You can do this instead:

END {
    WriteFinalInfoToLogFile();
    close(LOGFILE);
}

When a branch of your code wants to exit with code &quot;0&quot;, the &quot;exit 0&quot; is
called, the END section is envoked, and finally the &quot;exit 0&quot; is completed
and the program drops back to the shell with an exit code of 0 (normally
an &quot;OK&quot; signal).

When another branch wants to exit with &quot;code 1&quot; (an error or other
meaning), the &quot;exit 1&quot; is called, the END section is envoked, and finally
the &quot;exit 1&quot; is completed and the program drops back to the shell, but
this time the &quot;exit code&quot; of the program is set to 1.

Clear? :)

Check out &quot;<a  rel="nofollow" href="http://www.perl.com/doc/manual/html/pod/perlmod.html&quot">http://www.perl.com/doc/manual/html/pod/perlmod.html&quot</a>; or
&quot;<a  rel="nofollow" href="http://www.perldoc.com/perl5.8.0/pod/perlmod.html&quot">http://www.perldoc.com/perl5.8.0/pod/perlmod.html&quot</a>;

I read somewhere that the order in which the END statements are called
*is* important -- some modules may use them for their own cleanup.  They
are run in the reverse order as the Perl interperter sees them.  If you
want yours to run at the very end after all the other modules have done
their cleanup, then you will need to place your END { } block at the head
of your program, before all other &quot;use&quot; or &quot;include&quot; statements.

Dan

- - - - -
&quot;I do not fear computer,
I fear the lack of them.&quot;
 -- Isaac Asimov

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (GNU/Linux)

iD8DBQFBUG+GNiBNyqUzGb8RAgIMAJsFtckKsEElou/2ngkPRruFG0fANACfWN6X
kyM51IUfF9l0L33u3reeXlM=
=4tMq
-----END PGP SIGNATURE-----

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00157" href="msg00157.html">[Omaha.pm] Debugging running Perl code on Windows.</a></strong>
<ul><li><em>From:</em> &quot;Daniel Linder&quot; &lt;dan@linder.org&gt;</li></ul></li>
<li><strong><a name="00158" href="msg00158.html">Re: [Omaha.pm] Debugging running Perl code on Windows.</a></strong>
<ul><li><em>From:</em> Jay Hannah &lt;jay@jays.net&gt;</li></ul></li>
<li><strong><a name="00159" href="msg00159.html">Re: [Omaha.pm] Debugging running Perl code on Windows.</a></strong>
<ul><li><em>From:</em> &quot;Daniel Linder&quot; &lt;dan@linder.org&gt;</li></ul></li>
<li><strong><a name="00160" href="msg00160.html">Re: [Omaha.pm] Debugging running Perl code on Windows.</a></strong>
<ul><li><em>From:</em> Jay Hannah &lt;jay@jays.net&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00161.html">[Omaha.pm] The Perl Review</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00163.html">Re: [Omaha.pm] Debugging running Perl code on Windows.</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00160.html">Re: [Omaha.pm] Debugging running Perl code on Windows.</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00163.html">Re: [Omaha.pm] Debugging running Perl code on Windows.</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00162"><strong>Date</strong></a></li>
<li><a href="threads.html#00162"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
