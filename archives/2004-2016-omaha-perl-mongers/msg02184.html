<!-- MHonArc v2.6.24 -->
<!--X-Subject: Re: [Omaha.pm] Embeddable database options. -->
<!--X-From-R13: Fbqq Quevfgbcure Vnzvygba &#60;argneggbqqNtznvy.pbz> -->
<!--X-Date: 27 Aug 2009 00:29:45 &#45;0000 -->
<!--X-Message-Id: 1fdb7d920908261729m97f7d47p5e2ed2fae0f77d8b@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 3e2be50908240717g4b5d6a07s2d8adbf3e71daf5b@mail.gmail.com -->
<!--X-Reference: a4439dea0908241411m17b75744j1a7da148254a22e@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [Omaha.pm] Embeddable database options.</title>
<link rev="made" href="mailto:netarttodd@gmail.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg02183.html">Date Prev</a>][<a href="msg02185.html">Date Next</a>][<a href="msg02183.html">Thread Prev</a>][<a href="msg02185.html">Thread Next</a>][<a href="maillist.html#02184">Date Index</a>][<a href="threads.html#02184">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [Omaha.pm] Embeddable database options.</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;<a href="mailto:omaha-pm%40pm.org">omaha-pm@pm.org</a>&gt;</li>
<li><em>Subject</em>: Re: [Omaha.pm] Embeddable database options.</li>
<li><em>From</em>: Todd Christopher Hamilton &lt;<a href="mailto:netarttodd%40gmail.com">netarttodd@gmail.com</a>&gt;</li>
<li><em>Date</em>: Wed, 26 Aug 2009 19:29:35 -0500</li>
<li><em>Delivered-to</em>: <a href="mailto:mailman-omaha-pm%40mailman.pm.dev">mailman-omaha-pm@mailman.pm.dev</a></li>
<li><em>Delivered-to</em>: <a href="mailto:omaha-pm%40pm.org">omaha-pm@pm.org</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;	h=domainkey-signature:mime-version:received:in-reply-to:references	:date:message-id:subject:from:to:content-type	:content-transfer-encoding;	bh=P8tvf0cCRy1a6NxsfyvS1KLpZKvBiVcieF2lOnfNysc=;	b=VAf1UK7oakfHPMcmXlp/DkGc3i1FvX3DDpPVnbpEplwkuNRQ/OZFOQ6yKQOobCM8Gb	bMJ9LOtUCqswU91ffB6K0uLNxAxV8EbsIjfneuN3580sj1y2IooDgRW53FT9lDvfvXS2	WaYhta4EkjulH10QvbBB6tGpopTiihu0Zq1gI=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;	h=mime-version:in-reply-to:references:date:message-id:subject:from:to	:content-type:content-transfer-encoding;	b=Fir4z0wX9J9mZ98Tn5J5HoAEdHXliOtAID69Nv36Bw/cHClRPbwJg9b9jjmQfAgOhd	4ZAvkbKkqKbJsNtaMrVROd6ALBl/FSXEO4ti1LOnhfRtmLpo04WuEJYZ36ab+BwrTJBX	wnN0jwj0vk4pyh9KxxuUWAKAuWiu5qFESOwNE=</li>
<li><em>In-reply-to</em>: &lt;<a href="msg02181.html">a4439dea0908241411m17b75744j1a7da148254a22e@mail.gmail.com</a>&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://mail.pm.org/pipermail/omaha-pm">http://mail.pm.org/pipermail/omaha-pm</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:omaha-pm-request@pm.org?subject=help">mailto:omaha-pm-request@pm.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;omaha-pm.pm.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:omaha-pm@pm.org">mailto:omaha-pm@pm.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://mail.pm.org/mailman/listinfo/omaha-pm">http://mail.pm.org/mailman/listinfo/omaha-pm</a>&gt;,	&lt;<a href="mailto:omaha-pm-request@pm.org?subject=subscribe">mailto:omaha-pm-request@pm.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://mail.pm.org/mailman/options/omaha-pm">http://mail.pm.org/mailman/options/omaha-pm</a>&gt;,	&lt;<a href="mailto:omaha-pm-request@pm.org?subject=unsubscribe">mailto:omaha-pm-request@pm.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg02180.html">3e2be50908240717g4b5d6a07s2d8adbf3e71daf5b@mail.gmail.com</a>&gt;	&lt;<a href="msg02181.html">a4439dea0908241411m17b75744j1a7da148254a22e@mail.gmail.com</a>&gt;</li>
<li><em>Reply-to</em>: &quot;Perl Mongers of Omaha, Nebraska USA&quot; &lt;<a href="mailto:omaha-pm%40pm.org">omaha-pm@pm.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>I use Sqlite for embeded but you could also look at FireBird. I know
of a cool healthcare project used by the med center that uses FireBird
as a local cache for a fat client.


2009/8/24 Mario Steele &lt;mario@ruby-im.net&gt;:
&gt; Hello Dan,
&gt;
&gt; On Mon, Aug 24, 2009 at 10:17 AM, Dan Linder &lt;dan@linder.org&gt; wrote:
&gt;&gt;
&gt;&gt; Guys,
&gt;&gt;
&gt;&gt; I'm looking at rewriting some of the store/retrieve code in a project
&gt;&gt; I'm working on. &#xA0;The current method uses the Data::Dumper and eval()
&gt;&gt; code to store data to a hierarchical directory structure on disk.
&gt;&gt; Over the weekend I all but eliminated the hard-disk overhead by moving
&gt;&gt; the data to a temporary RAM disk -- sadly, the speed-ups were too
&gt;&gt; small to notice. &#xA0;This tells me that the overall Linux file-system
&gt;&gt; caching is working quite well. &#xA0;(Yay!) Unfortunately, this leads me
&gt;&gt; (again) determine that the Dumper/eval() code is probably the
&gt;&gt; bottle-neck. &#xA0;(Definately not what they were designed for, but work
&gt;&gt; remarkably well none the less...)
&gt;
&gt; Eval is more then likely your biggest bottleneck.&#xA0; Dumper not so much, but
&gt; heavy usage of eval in any language, can create a bottleneck in nothing
&gt; flat.
&gt;
&gt;&gt;
&gt;&gt; So, I started investigating alternatives:
&gt;&gt; &#xA0;* A true database with client/server model (i.e. MySQL, PostgreSQL, etc)
&gt;
&gt; Use MySQL / PostgreSQL is you are going to have many hits to the Perl script
&gt; that is going to be executing.&#xA0; It does well with threading, and also solves
&gt; the problem mentioned below about SQLite.
&gt;
&gt;&gt; &#xA0;* An embedded database such as SQLite (others?)
&gt;
&gt; SQLite is a great Database system, for File Based data storage.
&gt; Unfortunately, it stores in binary, so you can't exactly use grep, vi, etc,
&gt; etc, to read the contents of the database file.&#xA0; But unlike it's big
&gt; brother, you can only have one transactional lock (EG Database Open) at a
&gt; time on a database file.&#xA0; This is to prevent corruption of the data.&#xA0; (And
&gt; yes, this locks even if your just doing a read query.)
&gt;
&gt;&gt;
&gt;&gt; * Continue using the filesystem+directory structure using
&gt;&gt; freeze()/thaw() from the FreezeThaw CPAN module (speed improvement?)
&gt;
&gt; I dunno if freeze()/thaw() will do any good, as it still comes down to
&gt; Dumper/eval() to properly store the information.
&gt;
&gt;&gt;
&gt;&gt; * Use a DBD module to store/retrieve these files (i.e. DBD::File,
&gt;&gt; DBD::CSV, etc) (benefit here is that a simple change in the DB setup
&gt;&gt; code will mean a change from DBD::File to DBD::SQLite or
&gt;&gt; DBD::PostgreSQL should be fairly short work)
&gt;
&gt; DBD overall, is a great front end for you to use, for database storage, as
&gt; it gives you a common api across many different DB Backends.&#xA0; If you want
&gt; consistency, and the ability to test different database storage engines,
&gt; then I would strongly recommend you use DBD.
&gt;
&gt;&gt;
&gt;&gt; Internally I have some constraints:
&gt;&gt; &#xA0;* We'd like to keep the number of non-core Perl modules down
&gt;&gt; (currently we're 90% core), and a couple customers are extremely
&gt;&gt; sensitive to anything that is not supplied by their OS provider
&gt;&gt; (Solaris and HPUX for example).
&gt;
&gt; This is true in many facets, but you'll find standard that MySQL and SQLite
&gt; are often the biggest thing that is distributed on most Operating Systems
&gt; (Aside from Windows, but we won't go there).
&gt;
&gt;&gt; * We would also like to keep the files on disk and in a
&gt;&gt; human-readable form so the end users and support staff can peruse this
&gt;&gt; data with simple tools (grep, vi, etc).
&gt;
&gt; Again, as stated above, SQLite, and MySQL won't let you use grep, vi, etc,
&gt; to view the data, but simple tools can be created to create the same effect,
&gt; and highly optimize it to specific tasks, instead of looking through
&gt; hundreds of lines of data, to find a specific field.
&gt;
&gt;&gt;
&gt;&gt; &#xA0;* The remaining 10% that is non-core Perl modules are local copies of
&gt;&gt; &quot;pure perl&quot; CPAN modules we've merged into the source code branch
&gt;&gt; directly. &#xA0;(We do this because the code runs on Solaris/SPARC,
&gt;&gt; Solaris/x86_64, Linux/x86, Linux/ia64, HPUX/PA-RISC, HPUX/ia64, etc)
&gt;&gt;
&gt;&gt; My personal pick at the moment is SQLite (it is provided natively in
&gt;&gt; Solaris 10, and easy to install on Linux platforms), but I question if
&gt;&gt; the speed up it provides will be over-shadowed by the constant
&gt;&gt; spawning of the sqlite binary each time an element of data is queried.
&gt;&gt; &#xA0;(Anyone know if there is a way to leave a persistent copy of SQLite
&gt;&gt; running in memory that future copies hook into? &#xA0;Getting a bit far
&gt;&gt; afield from the initial SQLite implementation goals...)
&gt;
&gt; Now, I come to this, after explaining the above to you, and I will be
&gt; directly to the point.&#xA0; SQLite Binary (or BLOB) data types, while may seem
&gt; to be huge for data allocation and stuff, is actually quite minimal in
&gt; overall speed.&#xA0; This especially can be optimized when you need to look at
&gt; specific data fields, and could care less about the rest.&#xA0; As well with
&gt; anything else, SQLite does have overheads, but not nearly as much as you
&gt; might think.&#xA0; It only allocates the data needed to return the results of a
&gt; SQL query, or insert data into the database.
&gt;
&gt; The SQLite team has put much effort into optimizing the SQLite engine, so
&gt; that it can store, as well as retrieve data in the most efficient manner
&gt; possible, and keep the engine fast, and properly working.&#xA0; Many Linux
&gt; distributions (Ubuntu among most), use SQLite for a large amount of storage
&gt; within their own system, such as APT/Aptitude/Synaptic.&#xA0; Using SQLite can
&gt; have it's advantages, but also it's downfalls to.&#xA0; If your wanting to avoid
&gt; database locking issues, then I suggest MySQL.&#xA0; If your looking for Light
&gt; weight solution, that is quick, and not so much a worry about Locking
&gt; issues, then I would suggest SQLite.
&gt;
&gt;&gt;
&gt;&gt; Thanks for any insight,
&gt;&gt;
&gt;&gt; DanL
&gt;&gt;
&gt;&gt; --
&gt;&gt; ******************* ***************** ************* ***********
&gt;&gt; ******* ***** *** **
&gt;&gt; &quot;Quis custodiet ipsos custodes?&quot; (Who can watch the watchmen?) -- from
&gt;&gt; the Satires of Juvenal
&gt;&gt; &quot;I do not fear computers, I fear the lack of them.&quot; -- Isaac Asimov
&gt;&gt; (Author)
&gt;&gt; ** *** ***** ******* *********** ************* *****************
&gt;&gt; *******************
&gt;&gt; _______________________________________________
&gt;&gt; Omaha-pm mailing list
&gt;&gt; Omaha-pm@pm.org
&gt;&gt; <a  rel="nofollow" href="http://mail.pm.org/mailman/listinfo/omaha-pm">http://mail.pm.org/mailman/listinfo/omaha-pm</a>
&gt;
&gt; Hope this helps, and it is just my own two cents on the deal.
&gt;
&gt; --
&gt; Mario Steele
&gt; <a  rel="nofollow" href="http://www.trilake.net">http://www.trilake.net</a>
&gt; <a  rel="nofollow" href="http://www.ruby-im.net">http://www.ruby-im.net</a>
&gt; <a  rel="nofollow" href="http://rubyforge.org/projects/wxruby/">http://rubyforge.org/projects/wxruby/</a>
&gt; <a  rel="nofollow" href="http://rubyforge.org/projects/wxride/">http://rubyforge.org/projects/wxride/</a>
&gt;
&gt; _______________________________________________
&gt; Omaha-pm mailing list
&gt; Omaha-pm@pm.org
&gt; <a  rel="nofollow" href="http://mail.pm.org/mailman/listinfo/omaha-pm">http://mail.pm.org/mailman/listinfo/omaha-pm</a>
&gt;



-- 
Todd Christopher Hamilton
(402) 660-2787

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="02180" href="msg02180.html">[Omaha.pm] Embeddable database options.</a></strong>
<ul><li><em>From:</em> Dan Linder &lt;dan@linder.org&gt;</li></ul></li>
<li><strong><a name="02181" href="msg02181.html">Re: [Omaha.pm] Embeddable database options.</a></strong>
<ul><li><em>From:</em> Mario Steele &lt;mario@ruby-im.net&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg02183.html">Re: [Omaha.pm] Embeddable database options.</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg02185.html">[Omaha.pm] Fwd: Perl for Android</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg02183.html">Re: [Omaha.pm] Embeddable database options.</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg02185.html">[Omaha.pm] Fwd: Perl for Android</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#02184"><strong>Date</strong></a></li>
<li><a href="threads.html#02184"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
